<!DOCTYPE html>
<!-- http://www.imooc.com/code/8899 -->
<html>
<head>
	<title>七夕言情</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/pageA.css">
	<script type="text/javascript" src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="Swipe.js"></script>
</head>
<style type="text/css">
	.character {
		width: 151px;
		height: 291px;
		background: url("http://img.mukewang.com/55ade248000198ae10550582.png") -0px -291px no-repeat;
		position: absolute;
		/* 设置一个元素的坐标 */
		left: 6%;
		top: 55%;
	} 
	.slowWalk {
		/* 填入动画样式规则 */
		/* 规定 @keyframes 动画的名称 */
		-webkit-animation-name: person-slow;
		/* 规定动画完成一个周期所花费的秒或者毫秒。默认是0 */
		-webkit-animation-duration: 950ms;
		/* 动画切换的方式是一帧一帧的改变 */
		-webkit-animation-timing-function: steps(1, start);
		-moz-animation-name: person-slow;
		-moz-animation-duration: 950ms;
		-moz-animation-iteration-count: infinite;
		-moz-animation-timing-function: steps(1, start);
	}

	/* 普通慢走 */

	@-webkit-keyframes person-slow {
		0% {
			background-position: -0px -291px;
		}
		25% {
			background-position: -602px -0px;
		}
		50% {
			background-position: -302px -291px;
		}
		75% {
			background-position: -151px -291px;
		}
		100% {
			background-position: -0px -291px;
		}
	}

	@-moz-keyframes person-slow {
		0% {
			background-position: -0px -291px;
		}
		25% {
			background-position: -602px -0px;
		}
		50% {
			background-position: -302px -291px;
		}
		75% {
			background-position: -151px -291px;
		}
		100% {
			background-position: -0px -291px;
		}
	}
</style>

<body>
	<div id="content">
		<ul class="content-wrap">
			<!-- 第一幅画面 -->
			<li>
				<div class="a_background">
					<div class="a_background_top"></div>
					<div class="a_background_middle"></div>
					<div class="a_background_bottom"></div>
				</div>
			</li>
			<!-- 第二幅画面 -->
			<li>页面二</li>
			<!-- 第三幅画面 -->
			<li>页面三</li>
		</ul>

		<div id="boy" class="character"></div>
		<div class="button">
			<button>点击开始动画</button>
		</div>
	</div>
	<script type="text/javascript">
		var swipe = Swipe($("#content"));

		// // 绑定一个事件
		// $('button').click(function() {
		// 	// 调用接口
		// 	swipe.scrollTo($("#content").width()*2, 5000);
		// });

		// 获取数据
		var getValue = function(className) {
			var $elem = $('' + className + '');
			// 走路的路线坐标
			return {
				height: $elem.height(),
				top: $elem.position().top
			};
		}

		// 路的Y轴
		var pathY = function() {
			var data = getValue('.a_background_middle');
			return data.top + data.height / 2;
		}();

		var $boy = $('#boy');
		var boyHeight = $boy.height();

		// 修正小男孩的正确位置
		// 路得中间位置减去小孩的高度，25是一个修正值
		$boy.css({
			top: pathY - boyHeight + 25
		});

		// 增加精灵动画
		$('button').click(function() {
			// 增加走路的CSS3关键帧规则
			$boy.addClass('slowWalk');
		});
	</script>
</body>
</html>